!function(t){"use strict";t.extend(wyde.page,{isLoad:!1,started:!1,ajaxPage:function(e){if(this.settings=t.extend({search:".ajax-search-form",scope:this.scope.page,excludeURLs:[],excludeSelectors:[],transition:"fade"},e),"undefined"!=typeof ajax_page_settings&&(this.settings=t.extend(this.settings,ajax_page_settings)),this.searchPath="",this.ignoreURLs=[],this.ignoreURLs.push("wp-login/"),this.ignoreURLs.push("wp-admin/"),this.ignoreURLs.push("wp-content/"),!t("body").hasClass("woocommerce")&&!t("body").hasClass("woocommerce-page")){var i=this;t(this.settings.excludeURLs).each(function(t,e){e&&i.ignoreURLs.push(e)}),t(this.settings.excludeSelectors).each(function(){"a"==this.tagName.toLowerCase()?i.ignoreURLs.push(this.href):t(this).find("a").each(function(){i.ignoreURLs.push(this.href)})}),window.history.pushState&&t(window).off("popstate").on("popstate",function(){i.started!==!0||i.isIgnore(document.location)||i.loadContent(document.location.toString())}),setTimeout(function(){i.updateLink()},100),i.settings.search&&t(i.settings.search).each(function(e){t(this).attr("action")&&(i.searchPath=t(this).attr("action"),t(this).submit(function(){return console.log(i.searchPath),i.submitSearch(t(this).serialize()),!1}))})}},updateLink:function(e){var i=this;i.isIgnore(document.URL)||t("a:not(.no-ajax)",e?e:document.body).each(function(){!(this.href.indexOf(i.siteURL)>-1)||this.target&&"_self"!=this.target||i.isIgnore(this)||t(this).off("click").on("click",function(e){e.preventDefault();var s=t(this),n=s.attr("href");s.attr("title")||null;if(2==e.which||e.metaKey)return!0;i.targetPos=0;var o=i.getHash(n);o&&(n=n.replace(o,""),i.targetPos=o),i.loadContent(this.href)})})},loadContent:function(e,i){if(!this.isLoad){this.isLoad=!0,this.started=!0;var s=e.replace(/^.*\/\/[^\/]+/,"");"function"==typeof window.history.pushState?history.pushState({foo:1e3+1001*Math.random()},"Loading...",s+(i?"?"+i:"")):document.location.href="#"+s,this.currentPage=s;var n=this;t(window).unbind("resize"),this.hideContent(function(){n.removeSlider(),t.ajax({type:"GET",url:e,data:i,cache:!1,dataType:"html",success:function(t){n.isLoad=!1,n.updateContent(t),n.showContent(function(){n.refreshSlider(),n.settings.scope==n.scope.page&&"function"==typeof n.load?n.load():n.settings.scope==n.scope.content&&"function"==typeof n.contentLoad&&n.contentLoad(),n.initVCElements(),n.targetPos&&setTimeout(function(){history.pushState(null,"",n.targetPos)},800)})},error:function(t,i,s){n.isLoad=!1,window.location.href=e},statusCode:{404:function(){console.log("Page not found!")}}})})}},hideContent:function(e){var i=this,s=t(i.settings.scope),n=t(window).width()+100,o=t(window).height()+100,a=1e3;switch(i.settings.transition){case"fade":a=800,s.animate({opacity:0},a,function(){});break;case"slideToggle":s.css({position:"relative"}).animate({left:-n},a,"easeInOutExpo",function(){t("body").css({overflow:"hidden"})});break;case"slideLeft":s.css({position:"relative"}).animate({left:-n},a,"easeInOutExpo",function(){t("body").css({overflow:"hidden"})});break;case"slideRight":s.css({position:"relative"}).animate({left:n},a,"easeInOutExpo",function(){t("body").css({overflow:"hidden"})});break;case"slideUp":s.css({position:"relative"}).animate({top:-o,opacity:0},a,"easeInOutExpo",function(){t("body").css({overflow:"hidden"})});break;case"slideDown":s.css({position:"relative"}).animate({top:o,opacity:0},a,"easeInOutExpo",function(){t("body").css({overflow:"hidden"})})}setTimeout(function(){i.showLoader(),i.scrollTo(0,{duration:100}),"function"==typeof e&&e()},a)},showContent:function(e){var i=this,s=1e3,n=t(i.settings.scope),o=t(window).width()+100,a=t(window).height()+100;this.preloadImages(function(){switch(i.settings.transition){case"fade":s=800,n.animate({opacity:1},s,function(){});break;case"slideToggle":n.animate({left:0},s,"easeInOutExpo",function(){t("body").css({overflow:""}),t(this).css("position","")});break;case"slideLeft":n.css({left:o}).animate({left:0},s,"easeInOutExpo",function(){t("body").css({overflow:""}),t(this).css("position","")});break;case"slideRight":n.css({left:-o}).animate({left:0},s,"easeInOutExpo",function(){t("body").css({overflow:""}),t(this).css("position","")});break;case"slideUp":n.css({top:a}).animate({top:0,opacity:1},s,"easeInOutExpo",function(){t("body").css({overflow:""}),t(this).css("position","")});break;case"slideDown":n.css({top:-a}).animate({top:0,opacity:1},s,"easeInOutExpo",function(){t("body").css({overflow:""}),t(this).css("position","")})}"function"==typeof e&&setTimeout(function(){e()},s)})},getNodeAttribute:function(t,e,i){var s=new RegExp(String.format("<{0} {1}=[\"'](.*)[\"'].*>",e,i)),n=s.exec(t);return n&&n[1]?n[1]:!1},updateToolBar:function(e){if(t("#wpadminbar").length>0){var i=t(e).find("#wpadminbar");i&&t("#wpadminbar").html(i.html())}},updateHead:function(e){window.$=jQuery,t("head").find("style[data-type='vc_custom-css']").remove(),t("head").find("style[data-type='vc_shortcodes-custom-css']").remove();var i=t(e).filter("style[data-type='vc_custom-css']");i&&t("head").append(i);var s=t(e).filter("style[data-type='vc_shortcodes-custom-css']");s&&t("head").append(s),t("head").find("title").replaceWith(t(e).filter("title"))},googleTracking:function(){var e=this;"function"==typeof ga&&ga(function(){var i=ga.getAll();t.each(i,function(t,i){i.send("pageview",{page:e.currentPage,title:document.title})})})},getDocumentHtml:function(e){var i=String(e).replace(/<\!DOCTYPE[^>]*>/i,"").replace(/<(html|head|body|title|meta)([\s\>])/gi,'<div class="document-$1"$2').replace(/<\/(html|head|body|title|meta)\>/gi,"</div>");return t.trim(i)},updateContent:function(e){if(window.$=jQuery,this.clearVCClass(),this.settings.scope==this.scope.content){var i=t(e).find("#slider");i.length?t("#slider").length?t("#slider").html(i.html()):t("#header").hasClass("below-slider")?t("#header").before(i):t("#header").after(i):t("#slider").remove()}var s=t(e).find(this.settings.scope);s.length&&t(this.settings.scope).html(s.html());var n=null,o=null;if(window.DOMParser)try{var a=new DOMParser;n=t(a.parseFromString(e,"text/html")),o=n.find("body"),a=n=null}catch(r){n=t(this.getDocumentHtml(e)),o=n.find(".document-body:first")}else n=t(this.getDocumentHtml(e)),o=n.find(".document-body:first");var c=(t("body").attr("class"),o.attr("class"));c&&t("body").removeClass().addClass(c);var d=this,h=o.find("link[rel='stylesheet']");h.each(function(){0==t("body link[id='"+t(this).attr("id")+"']").length&&t(d.settings.scope).append(this)});var l=o.find("script");l.each(function(){t(this).attr("src")&&0==t("body script[src='"+t(this).attr("src")+"']").length&&t(d.settings.scope).append(this)}),this.updateHead(e),this.updateToolBar(e),this.googleTracking()},removeSlider:function(){if(t(".rev_slider").length&&"function"==typeof t.fn.revolution)try{t(".rev_slider").revkill()}catch(e){}},refreshSlider:function(){t(".rev_slider").length&&"function"==typeof t.fn.revolution&&t(window).trigger("resize")},clearVCClass:function(){},initVCElements:function(){"function"==typeof vc_js&&vc_js(),"function"==typeof t.fn.vcGrid&&t("[data-vc-grid-settings]").each(function(){t(this).vcGrid()})},submitSearch:function(t){this.isLoad||this.loadContent(this.searchPath,t)},isIgnore:function(e){if(!e)return!0;var i=e.href?e.href:e.toString();if(!i)return!0;var s=!1,n=getUrlVars(i);s=n.page_id?this.id==n.page_id:e.pathname==window.location.pathname,this.onepage&&t("body").hasClass("search")&&(s=!1);var o=this.getHash(i);if("#"==o||s&&o)return!0;for(var a in this.ignoreURLs)if(i.indexOf(this.ignoreURLs[a])>-1)return!0;return!1}})}(jQuery);